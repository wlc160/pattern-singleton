# pattern-singleton

设计模式之单例模式：

1、定义：
确保一个类在任何情况下都绝对只有一个实例，并提供一个全局访问点（创建型模式），例如在javaEE中：ServletContext、ServletConfig、ApplicationContext等；在现实生活中：国家主席、公司CEO、部门经理等；

（1）优点：在内存中只有一个实例，减少内存开销；可以避免对资源的多重引用；设置全局访问点，严格控制访问

（2）缺点：没有接口，扩展困难；若要扩展对象，只有修改代码，没有代码途径

2、分类：

（1）饿汉式单例（在单例类首次加载时就创建实例）：

优点：没有加任何的锁、执行效率比较高；在用户体验上比懒汉式好 

缺点：浪费内存空间

（2）懒汉式单例（被外部类调用时才创建实例）：

优点：节省内存空间

缺点：线程不安全（适中方案：双重检查锁）

（3）注册式单例（将每个实例都缓存到统一的容器中，用唯一标识获取实例，其中有两种写法：枚举登记和容器缓存）

优点：防止被反射破坏

缺点：线程不安全（适中方案：双重检查锁）

（4）ThreadLocal单例

优点：保证单个线程的全局唯一，且天生线程安全

缺点：不能保证创建的对象全局唯一

3、总结：

1、私有化构造器  2、保证线程安全  3、延迟加载  4、防止序列化和反序列化破坏单例  5、防御反射破坏单例



